<div class="row">
    <div class="col">
        <h1 id="buku">&nbsp;</h1>
        <b>Total buku</b>
    </div>
    <div class="col">
        <h1>4000</h1>
        <b>Buku dipinjam</b>
    </div>
    <div class="col">
        <h1>4000</h1>
        <b>Visitor</b>
    </div>
</div>
<div class="row">
    <div class="kaegori">
        <canvas id="mine"></canvas>
    </div>
</div>
<script>
    // var ctx = document.getElementById("mine").getContext("2d");
    let tmp;
    setInterval(() => {
        get("../api/buku.php?top=7", e => {
            if (JSON.stringify(tmp) != JSON.stringify(e)) {
                tmp = e;
                console.log(tmp);
                let data = {
                    labels: [],
                    datasets: [{
                        label: "kategori",
                        data: [],
                        backgroundColor: [
                            "red",
                            "blue",
                            "green",
                            "purple",
                            "yellow",
                            "pink",
                            "orange"
                        ]
                    }]
                };
                e.forEach(list => {
                    data.labels.push(list.nama);
                    data.datasets[0].data.push(list.jumlah);
                });
                var ctx = gElement("#mine").getContext("2d");
                var myChart = new Chart(ctx, {
                    type: "bar",
                    data: data,
                    options: {
                        animation: {
                            duration: 0
                        },
                        elements: {
                            line: {
                                tension: 0
                            }
                        }
                    }
                });
            }
        });
    }, 300);

    let temp;
    setInterval(() => {
        get("../api/buku.php?count", e => {
            if (JSON.stringify(temp) != JSON.stringify(e)) {
                temp = e;
                let total = gElement("#buku");
                total.innerHTML = e;
            }
        });
    }, 300);
</script>